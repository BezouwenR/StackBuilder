<?xml version="1.0" encoding="UTF-8"?>
<?include $(sys.CURRENTDIR)\Config.wxi?>

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension">
	<Product Id="*" Name="treeDiM.StackBuilder.TechnologyBSA"
           Language="1033"
           Version="1.0.0.0"
           Manufacturer="$(var.Manufacturer)"
           UpgradeCode="7c46518b-a78e-4201-bbaa-0937ee994794">
		<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />
    <MediaTemplate EmbedCab="yes"/>
		<MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />

    <Property Id="VIRTUAL_DIR_VAL" Value="StackBuilderTechBSAWebApp" />
    <PropertyRef Id="NETFRAMEWORK45"/>

    <Condition Message="This application requires .NET Framework 4.5. Please install the .NET Framework then run this installer again.">
      <![CDATA[Installed OR NETFRAMEWORK45]]>
    </Condition>

    <ComponentGroup Id="CompGroup_WebSitePages">
      <Component Id="CompDefault" Directory="INSTALLFOLDER" Guid="{8A21DF4C-06D3-40B8-8B21-F3781CFDBE1F}">
        <File Id="Default.aspx" KeyPath="yes" Source="$(var.StackBuilderTechBSASourceDir)\Default.aspx"/>
        <File Id="Default.aspx.cs" Source="$(var.StackBuilderTechBSASourceDir)\Default.aspx.cs"/>
        <File Id="Global.asax" Source="$(var.StackBuilderTechBSASourceDir)\Global.asax"/>
        <File Id="Handler.ashx" Source="$(var.StackBuilderTechBSASourceDir)\Handler.ashx"/>
        <File Id="Web.config" Source="$(var.StackBuilderTechBSASourceDir)\Web.config"/>
      </Component>
    </ComponentGroup>

		<Feature Id="ProductFeature" Title="treeDiM.StackBuilder.TechnologyBSA" Level="1">
      <ComponentGroupRef Id="CompGroup_WebSitePages"/>
			<ComponentGroupRef Id="CompGroup_StackBuilderTechBSABin" />
      <ComponentGroupRef Id="WebIISConfiguration"/>
		</Feature>
	</Product>
</Wix>
